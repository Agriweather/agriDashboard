<!DOCTYPE html>
<html>

<head>
    <title>AgriWeather Dashboard</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <!-- <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="js/model.js"></script>
    <script type="text/javascript" src="js/display.js"></script>
    <script type="text/javascript" src="js/controller.js"></script>
    <script type="text/javascript" src="js/gauge.min.js"></script>
    <script type="text/javascript" src="js/jquery.matchHeight.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" /> -->
    <link href="assets/css/core.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/components.css" rel="stylesheet" type="text/css" />
    <!-- <link href="assets/css/icons.css" rel="stylesheet" type="text/css" /> -->
    <link href="assets/css/pages.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/menu.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/responsive.css" rel="stylesheet" type="text/css" />
    <link href="assets/plugins/c3/c3.min.css" rel="stylesheet" type="text/css" />
    <script src="assets/js/modernizr.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/slick.css" />
    <script type="text/javascript" src="js/slick.min.js"></script>
    <style>
        html {
            height: 100%;
        }
        body {
            min-height: 100% !important;
        }
        svg{
            height: 150px;
        }
        .slick{
            height: 100%;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-toggleable-md navbar-inverse ">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <a class="navbar-brand" href="index.html">AgriWeather</a>
        <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
            
        </div>
    </nav>
    <div class="container-fluid">
        <div class="slick">
            <div class="item">
                <div class="row">
                    <div class="col col-6 col-sm-6 r-card">
                        <div class="inner-card">
                            <h1 style="margin: 0,0">福壽螺出現機率</h1>
                            <canvas id="foo" style="width:200px height:100px"></canvas>
                        </div>
                    </div>
                    <div class="col col-3 col-sm-3 r-card">
                        <div class="inner-card">
                            <h1 style="margin: 0,0">最低氣溫</h1>
                            <h2 id="temp_low" style="text-align: center;color:green">23.4度</h2>
                        </div>
                    </div>
                    <div class="col col-3 col-sm-3 r-card">
                        <div class="inner-card">
                            <h1 style="margin: 0,0" >最高氣溫</h1>
                            <h2 id="temp_high" style="text-align: center; color:green">31.4度</h2>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col col-6 col-sm-6 r-card">
                        <div class="inner-card">
                            <div class="card-box">
                                <h4 class="m-t-0 m-b-30 header-title"><b>Roated Chart</b></h4>
                                <div id="chart"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col col-6 col-sm-6 r-card">
                        <div class="inner-card">
                            <div class="card-box">
                                <h4 class="m-t-0 m-b-30 header-title"><b>Donut Chart</b></h4>
                                <div id="donut-chart"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="item">
                <div class="row">
                    <div class="col col-6 col-sm-6 r-card">
                        <div class="inner-card">
                            <h1 style="margin: 0,0">福壽螺出現機率</h1>
                            <canvas id="foo" style="width:100%"></canvas>
                        </div>
                    </div>
                    <div class="col col-3 col-sm-3 r-card">
                        <div class="inner-card">
                            <h1 style="margin: 0,0">最低氣溫</h1>
                            <h2 style="text-align: center;color:green">23.4度</h2>
                        </div>
                    </div>
                    <div class="col col-3 col-sm-3 r-card">
                        <div class="inner-card">
                            <h1 style="margin: 0,0">最高氣溫</h1>
                            <h2 style="text-align: center; color:green">31.4度</h2>
                        </div>
                    </div>
                    
                </div>
                <div class="row">
                    <div class="col col-6 col-sm-6 r-card">
                        <div class="inner-card">
                            <div class="card-box">
                                <h4 class="m-t-0 m-b-30 header-title"><b>Chart</b></h4>
                                <div id="chart"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col col-6 col-sm-6 r-card">
                        <div class="inner-card">
                            <div class="card-box">
                                <h4 class="m-t-0 m-b-30 header-title"><b>pie Chart</b></h4>
                                <div id="pie-chart"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="indexModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Modal title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-danger delete-confirm" data-dismiss="modal">刪除</button>
                </div>
            </div>
        </div>
    </div>
</body>
<!-- <script src="assets/js/jquery.min.js"></script> -->
<!-- <script src="assets/js/bootstrap.min.js"></script> -->
<script src="assets/js/detect.js"></script>
<script src="assets/js/fastclick.js"></script>
<script src="assets/js/jquery.slimscroll.js"></script>
<script src="assets/js/jquery.blockUI.js"></script>
<script src="assets/js/waves.js"></script>
<script src="assets/js/wow.min.js"></script>
<script src="assets/js/jquery.nicescroll.js"></script>
<script src="assets/js/jquery.scrollTo.min.js"></script>
<script src="assets/js/jquery.core.js"></script>
<script src="assets/js/jquery.app.js"></script>
<script type="text/javascript" src="assets/plugins/d3/d3.min.js"></script>
<script type="text/javascript" src="assets/plugins/c3/c3.min.js"></script>
<script src="assets/pages/jquery.c3-chart.init.js"></script>
<script type="text/javascript">

var temp =['temperature'];
var hum = ['humidity'];
var time = [];
var temp_high = [];

$(document).ready(function() {

    var url = 'http://demo.smartdog.com.tw/agri/mobile/';
    var data = {'length':'30' , 'start':'2017-05-30 16:00:00' , 'end':'2017-06-01 18:00:00'}

    

    $.ajax({
        method:'POST',
        url:'agriMonitor',
        data:data
    }).done(function(data){
        console.log(data);

        var detail = data.data.Data;


        for(i = 0 ; i < detail.length;i++){
            if(i % 5 == 0){
                time.push(detail[i]);
            }
            else if(i % 5 == 1){
                temp.push(detail[i]);
            }
            else if(i % 5 == 2){
                temp_high.push(detail[i]);
            }
            else if(i % 5 == 3){
                hum.push(detail[i]);
            }
        }
        //data -> change the temperature humidity data below
    });


    // controller.init($('.container-fluid'), $('ul.navbar-nav'));
    // // $('a[nav-target="farm"]').trigger('click');
    var opts = {
        angle: -0.2, // The span of the gauge arc
        lineWidth: 0.2, // The line thickness
        radiusScale: 1, // Relative radius
        pointer: {
            length: 0.6, // // Relative to gauge radius
            strokeWidth: 0.035, // The thickness
            color: '#000000' // Fill color
        },
        limitMax: false, // If false, the max value of the gauge will be updated if value surpass max
        limitMin: false, // If true, the min value of the gauge will be fixed unless you set it manually
        colorStart: '#6FADCF', // Colors
        colorStop: '#8FC0DA', // just experiment with them
        strokeColor: '#E0E0E0', // to see which ones work best for you
        generateGradient: true,
        highDpiSupport: true, // High resolution support
        percentColors: [
            [0.0, "#a9d70b"],
            [0.50, "#f9c802"],
            [1.0, "#ff0000"]
        ],
        staticLabels: {
            font: "10px sans-serif", // Specifies font
            labels: [0, 20, 40, 60, 80, 100], // Print labels at these values
            color: "#000000", // Optional: Label text color
            fractionDigits: 0 // Optional: Numerical precision. 0=round off.
        },
    };
    var target = document.getElementById('foo'); // your canvas element
    var gauge = new Gauge(target).setOptions(opts); // create sexy gauge!
    gauge.maxValue = 100; // set max gauge value
    gauge.setMinValue(0); // Prefer setter over gauge.minValue = 0
    gauge.animationSpeed = 32; // set animation speed (32 is default value)
    gauge.set(60); // set actual value
    $('.slick').slick({
        autoplay:true,
        arrows:false,
        autoplaySpeed:2000
    })
});

var chart = c3.generate({
    bindto: '#chart',
    data: {
      columns: [
        temp,
        hum
      ],
      axes: {
        humidity: 'y2' // ADD
      }
    },
    axis: {
      y: {
        label: { // ADD
          text: 'Temperature Label',
          position: 'outer-middle'
        },
      },
      y2: {
        show: true, // ADD
        label: { // ADD
          text: 'Humidity Label',
          position: 'outer-middle'
        }
      }
    }
});

$('#temp_low').html(temp[temp.length-1]+'度');
$('#temp_high').html(temp_high[temp_high.length-1]+ '度');


</script>

</html>
